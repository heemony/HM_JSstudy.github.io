
<!DOCTYPE html>
<html>
<head>
<title>Palette Base</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
<!--/* global template css */-->
<link rel="stylesheet" type="text/css" href="/etc.clientlibs/designs/smg/global/templates/clientlibs/css/main.css">
<!--/* palette template css */-->
<link data-rawcode rel="stylesheet" type="text/css" href="/etc.clientlibs/designs/smg/palette/templates/clientlibs/css/main.css">
<!--/* component css */-->
<link data-rawcode rel="stylesheet" type="text/css" href="/apps/samsung/components/global/content/palette/palette-top/clientlibs/css/main.css">
</head>
<body>
<div id="wrap">
<!--/* header */-->
    <div>
        <ul>
            <li><a href="#" id="btn1">움직이기</a></li>
            <li><a href="#" id="btn2">줌인하기</a></li>
            <li><a href="#" id="btn3">움직인후 줌인하기</a></li>
            <li><a href="#" id="btn4">줌1로 변경후 움직인후 원래줌으로 돌아가기</a></li>
            <li><a href="#" id="btn5">리셋하기</a></li>
        </ul>
    </div>
    <!--/* content */-->
    <div id="content" role="main">
        <div class="palette-container" data-global-text='{
            "COLLAPSE" : "Collapse",
            "EXPAND" : "Expand",
            "HIGHCONTRAST" : "High contrast",
            "DEFAULTCONTRAST" : "Default contrast"
        }'>
            <div class="palette-top">
                <div class="palette-top__layout">
                    <div class="palette-top__layout-inner">
                        <ul class="palette-top__content">
                            <li id="camera" class="palette-top__content-item">
                                <div class="palette-top__title"><strong data-local-txt="0034">CAMERA</strong></div>
                                <ul class="palette-top__list">
                                    <li class="palette-top__item">
                                        <div class="palette-item main-card" data-feature="battery" data-offset-top="-1020" data-offset-left="-197" data-range="1">
                                            <div class="palette-inner">
                                                <div class="dev-layout">
                                                    <div class="dev-layout-bg">
                                                        <div class="display-pc">
                                                            <div class="js-picture">
                                                                <img data-media="(min-width: 768px)" src="http://localhost:99/apps/samsung/components/global/content/palette/assets/base/b_battery_pc.jpg" alt="Galaxy S21 series is standing vertically. The inside component and battery flow are illustrated on the back of the device." data-local-txt="7057">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="dev-layout-inner">
                                                        <div class="feature-content">
                                                            <div class="feature-title-wrap">
                                                                <div class="feature-title"><strong data-local-txt="0049">Intelligent Battery</strong></div>
                                                            </div>
                                                            <div class="feature-btn-wrap">
                                                                <div class="feature-btn"><a href="#" role="button" class="cm-palette-btn type-white" title="Intelligent Battery" data-local-title="0049" data-omni-type="microsite_contentinter" data-omni="product feature:intelligent battery" ga-ca="content click" ga-ac="feature" ga-la="product feature:intelligent battery"><span class="cta-text" data-local-txt="8008">LEARN MORE</span></a></div>
                                                            </div>
                                                        </div>
                                                        <a href="#" role="button" class="feature-link" title="Intelligent Battery" data-local-title="0049" data-omni-type="microsite_contentinter" data-omni="product feature:intelligent battery" ga-ca="content click" ga-ac="feature" ga-la="product feature:intelligent battery"><span class="blind" data-local-txt="8008">LEARN MORE</span></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="height:500px;background:#000"></div>
<!--/* footer */-->
</div>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="vendor01.TweenMax.2.1.3.js"></script>
<script src="utils.js"></script>
<script>
var Util = Utils;

var ZoomMotion = function (container, args) {
    var defParams = {
    };
    this.opts = Util.def(defParams, (args || {}));
    if (!(this.obj = $(container)).length) return;
    this.init();
};
ZoomMotion.prototype = {
    init : function () {
        this.buildTween();
    },
    buildTween : function () {
        Util.def(this, {
            tweens : {
                instance : null,
                props : {
                    current : 1
                },
                reset : $.proxy(function () {
                    if (this.tweens.instance == null) return;
                    this.tweens.props.current = 1;
                    this.tweens.destroy();
                    TweenLite.set(this.obj, {
                        scale : 1
                    });
                    this.obj.css('transform', '');
                }, this),
                destroy : $.proxy(function () {
                    if (this.tweens.instance == null) return;
                    this.tweens.instance.kill();
                    this.tweens.instance = null;
                }, this),
                run : $.proxy(function (num) {
                    var defferd = $.Deferred();
                    if (num == this.tweens.props.current) {
                        defferd.resolve();
                    } else {
                        var step1 = TweenLite.to(this.obj, .5, {
                            scale : num,
                            onComplete : $.proxy(function () {
                                this.tweens.props.current = num;
                                defferd.resolve();
                            }, this)
                        });
                        this.tweens.instance = step1;
                    }
                    return defferd.promise();
                }, this)
            }
        });
    },
    run : function (num) {
        return this.tweens.run(num);
    },
    reset : function () {
        this.tweens.reset();
    },
    destroy : function () {
        this.tweens.destroy();
    }
};

var MoveMotion = function (container, args) {
    var defParams = {
    };
    this.opts = Util.def(defParams, (args || {}));
    if (!(this.obj = $(container)).length) return;
    this.init();
};
MoveMotion.prototype = {
    init : function () {
        this.buildTween();
    },
    buildTween : function () {
        Util.def(this, {
            tweens : {
                instance : [],
                props : {
                    current : 0,
                    space : 100
                },
                reset : $.proxy(function () {
                    this.tweens.props.current = 0;
                    this.tweens.destroy();
                    TweenLite.set(this.obj, {
                        y : 0
                    });
                    this.obj.css('transform', '');
                }, this),
                destroy : $.proxy(function () {
                    for (var i = 0, max = this.tweens.instance.length; i < max; i++) {
                        this.tweens.instance[i].kill();
                    }
                    this.tweens.instance = [];
                }, this),
                run : $.proxy(function () {
                    var defferd = $.Deferred();
                    var num = this.tweens.props.current - this.tweens.props.space;
                    var step1 = TweenLite.to(this.obj, .5, {
                        y : num,
                        onComplete : $.proxy(function () {
                            this.tweens.props.current = num;
                            defferd.resolve();
                        }, this)
                    });
                    this.tweens.instance.push(step1);
                    return defferd.promise();
                }, this)
            }
        });
    },
    run : function () {
        return this.tweens.run();
    },
    reset : function () {
        this.tweens.reset();
    },
    destroy : function () {
        this.tweens.destroy();
    }
};

var animation = {
    init : function () {
        this.setElements();
        this.buildZoomMotion();
        this.buildMoveMotion();
        this.bindEvents(true);
    },
    setElements : function () {
        this.feature = $('[data-feature="battery"]');
        this.featureInner = this.feature.find('.palette-inner');
        this.btn1 = $('#btn1');
        this.btn2 = $('#btn2');
        this.btn3 = $('#btn3');
        this.btn4 = $('#btn4');
        this.btn5 = $('#btn5');
    },
    buildZoomMotion : function () {
        Util.def(this, {
            zoommotion : {
                instance : null,
                destroy : $.proxy(function () {
                    if (this.zoommotion.instance == null) return;
                    this.zoommotion.instance.destroy();
                    this.zoommotion.instance = null;
                }, this),
                reset : $.proxy(function () {
                    if (this.zoommotion.instance == null) return;
                    return this.zoommotion.instance.reset();
                }, this),
                run : $.proxy(function (num) {
                    if (this.zoommotion.instance == null) return;
                    return this.zoommotion.instance.run(num);
                }, this),
                build : $.proxy(function () {
                    this.zoommotion.instance = new ZoomMotion(this.featureInner);
                }, this)
            }
        });
        this.zoommotion.build();
    },
    buildMoveMotion : function () {
        Util.def(this, {
            movemotion : {
                instance : null,
                destroy : $.proxy(function () {
                    if (this.movemotion.instance == null) return;
                    this.movemotion.instance.destroy();
                    this.movemotion.instance = null;
                }, this),
                reset : $.proxy(function () {
                    if (this.movemotion.instance == null) return;
                    return this.movemotion.instance.reset();
                }, this),
                run : $.proxy(function () {
                    if (this.movemotion.instance == null) return;
                    return this.movemotion.instance.run();
                }, this),
                build : $.proxy(function () {
                    this.movemotion.instance = new MoveMotion(this.feature);
                }, this)
            }
        });
        this.movemotion.build();
    },
    bindEvents : function (type) {
        if (type) {
            this.btn1.on('click', $.proxy(this.btn1Click, this));
            this.btn2.on('click', $.proxy(this.btn2Click, this));
            this.btn3.on('click', $.proxy(this.btn3Click, this));
            this.btn4.on('click', $.proxy(this.btn4Click, this));
            this.btn5.on('click', $.proxy(this.btn5Click, this));
        }
    },
    btn1Click : function (e) {
        e.preventDefault();
        this.movemotion.run();
    },
    btn2Click : function (e) {
        e.preventDefault();
        this.zoommotion.run(1.2);
    },
    btn3Click : function (e) {
        e.preventDefault();
        this.movemotion.run().done($.proxy(function () {
            this.zoommotion.run(1.2);
        }, this));
    },
    btn4Click : function (e) {
        e.preventDefault();
        var currentZoom = this.zoommotion.instance.tweens.props.current;
        this.zoommotion.run(1).done($.proxy(function () {
            this.movemotion.run().done($.proxy(function () {
                this.zoommotion.run(currentZoom);
            }, this));
        }, this));
    },
    btn5Click : function (e) {
        e.preventDefault();
        this.movemotion.reset();
        this.zoommotion.reset();
    }
};
animation.init();
</script>
</body>
</html>
