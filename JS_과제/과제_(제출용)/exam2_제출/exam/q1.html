
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>exam</title>
<style>
@charset "utf-8";
*{margin:0;padding:0}
body{font-size:14px;line-height:1.5;color:#555}
h1,h2,h3,h4,h5,h6{text-align:left}
ul,li{list-style:none}
button,label{cursor:pointer}
button::-moz-focus-inner{padding:0;border:0}
hr{display:none}
#wrapper{padding:0 10px}
.exam_wrap{padding:10px 0}
.exam_wrap h1{margin:5px 0;font-size:1em}
.exam_q ul{zoom:1}
.exam_q ul:after{display:block;clear:both;content:''}
.exam_q ul li{float:left;width:100px;margin-left:-1px;padding:5px 0;border:1px solid #ccc;text-align:center}
.exam_q ul li:first-child{margin-left:0}
.exam_q ul li.active{background:yellow}
</style>
</head>
<body>
<!-- wrapper [s] -->
<div id="wrapper">
	<!-- header [s] -->
	<div id="header">
	</div>
	<!-- header [e] -->
	<hr />
	<!-- container [s] -->
	<div id="container">
        <div class="exam_wrap">
            <h1>Q. 첫번째부터 순서대로 선택하고, 전에 선택했던 Element의 배경색을 지우시고, 무한loop 돌게 하세요 (클래스 제어)</h1>
            <div class="exam_q"><!-- 부모 -->
                <ul>
                    <li class="active">one</li>
                    <li>two</li>
                    <li>three</li>
                    <li>four</li>
                    <li>five</li>
                    <li>six</li>
                    <li>seven</li>
                    <li>eight</li>
                    <li>nine</li>
                </ul>
            </div>
            <button type="button">이전</button>
            <button type="button">다음</button>
        </div>
	</div>
	<!-- container [e] -->
	<hr />
	<!-- footer [s] -->
	<div id="footer">
	</div>
	<!-- footer [e] -->
</div>
<!-- wrapper [e] -->
</body>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
	(function () {
		'use strict';
		var examFunc = {
			init : function () { // init - 초기 실행문, 아래에 적힌 코드 순서대로 실행된다. (설계순서)
				this.setElements(); // 선택자 정의
                this.initOpts(); // 초기값 정의
                this.initLayout();  // 초반에 시작할 때 'one'에 배경색상 지정해놓기. 
				this.clickEvent(); // 버튼에게 클릭 이벤트. (버튼 누르면 이벤트 넘겨줌.) (넘겨주는 이벤트 : setLayout)
			},
			setElements : function () {
                console.log(this)
				this.exam = $('.exam_wrap').eq(0);
				this.examQ = this.exam.find('.exam_q');
				this.examBtn = this.exam.children('button');
				this.examUl = this.examQ.children();
				this.examList = this.examUl.children();
			},
			initOpts : function () {
				this.condition = 0;
			},
			clickEvent : function () { 
                this.examBtn.on('click', this.setLayout.bind(this));
                // bind는 this를 examFunc으로 바꿔주는 것.
                // console.dir(this) // Object
                // console.dir(this.setLayout) // ƒ setLayout(ev)
                // console.dir(this.setLayout.bind(this)) // ƒ bound setLayout()
			},
			initLayout : function () {
                this.examList.eq(this.condition).addClass('active');
			},
			setLayout : function (ev) {
                console.log(this)
                this.clearLayout(); // 전에 선택했던 배경색 지우기.
    
                if(ev.target.innerHTML === '다음') { // 클릭한 타겟의 innerHTML 이 '다음'이면
                    this.examList.eq(this.condition + 1).addClass('active'); // html에서 one에 먼저 active가 붙어져 있기 때문에.. 그다음 two
                    this.condition++;

                    if(this.condition > this.examList.length - 1) { // 만약에 (클릭한 타겟의 this.condition이) 8을 넘어 9가 된다면
                        this.initOpts(); // this.condition을 0으로 돌려주고, (무한 루프니까 처음으로 돌아가야해서)
                        this.examList.eq(this.condition).addClass('active'); // 0인덱스에게 active 값을 붙여준다.
                    } 
                } else { // 만약 클릭한 타겟의 innerHTML 이 다음이 아닌 경우 ('이전' 이라면)
                    this.condition--; // 인덱스를 하나 먼저 빼주고,
                    this.examList.eq(this.condition).addClass('active'); // 클래스를 붙여야 잘 작동하겠지요~

                    if(this.condition < 0) { // 0 이하로 넘어가면 
                        this.condition = this.examList.length - 1; // 8로 재할당
                        this.examList.eq(this.condition).addClass('active'); // 그리고 해당 8인덱스에 클래스 붙여줌.
                    }      
                }
			},
			clearLayout : function () { 
                // if '해당 인덱스'에 class가 있는지 확인해서 
					// 있다면 removeClass
                if(this.examList.eq(this.condition).hasClass('active')) {  
					this.examList.eq(this.condition).removeClass('active'); 
				}
			}
		}
		examFunc.init(); 
	})();
</script>
</html>
