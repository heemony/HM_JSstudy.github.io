<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>exam - thema</title>
<style>
/* temporary css */
*{margin:0;padding:0}
body{font-size:14px;font-family:"나눔고딕",NanumGothic,"굴림",Gulim,Sans-serif;line-height:1.5}
h1,h2,h3,h4,h5,h6{font-size:14px}
ul,li{list-style:none}
button{font-size:14px;font-family:"나눔고딕",NanumGothic,"굴림",Gulim,Sans-serif;line-height:1.5;cursor:pointer}
button::-moz-focus-inner{padding:0;border:0}
.cast_box{width:880px;margin:0 auto;border:1px solid #ccc}
.cast_tab{}
.cast_tab ul{zoom:1}
.cast_tab ul:after{display:block;clear:both;content:''}
.cast_tab ul li{float:left;width:12.5%;text-align:center}
.cast_tab ul li a{display:block;padding:10px;border-left:1px solid #ccc;background:#f3f3f3;color:#000;text-decoration:none}
.cast_tab ul li:first-child a{border-left:0 none}
.cast_tab ul li.active a{background:#ccc;color:#000}
.cast_cont{border-top:1px solid #ccc}
.cast_article{display:none;height:500px}
.cast_article.active{display:block}
.cast_setting{padding:10px;border-top:1px solid #ccc;zoom:1}
.cast_setting:after{display:block;clear:both;content:''}
.cast_setting .cast_btn{float:left}
.cast_setting .cast_num{float:right;margin-right:5px}
.cast_num .total{font-weight:bold}

.slide_box{position:relative;width:880px;margin:0 auto}
.slide_tab{position:absolute;left:0;bottom:0;right:0;z-index:30;padding:15px 0;font-size:0;line-height:0;text-align:center}
.slide_tab ul{display:inline-block;vertical-align:top}
.slide_tab ul li{float:left;margin:0 3px}
.slide_tab ul li a{display:inline-block;width:12px;height:12px;border-radius:100%;background:#ccc;vertical-align:top}
.slide_tab ul li.active a{background:#000}
.slide_cont{overflow:hidden;position:relative;height:440px}
.slide_article{display:block;position:absolute;left:0;top:0;width:100%;height:440px}
.slide_article:nth-child(1){background:red}
.slide_article:nth-child(2){background:orange}
.slide_article:nth-child(3){background:yellow}
.slide_article:nth-child(4){background:green}
.slide_article:nth-child(5){background:blue;color:#fff}
.slide_article:nth-child(6){background:skyblue;color:#fff}
.slide_article:nth-child(7){background:navy;color:#fff}
.slide_article:nth-child(8){background:black;color:#fff}
.slide_setting{font-size:0;line-height:0}
.slide_setting .slide_btn button{position:absolute;top:50%;z-index:30;margin:0 20px}
.slide_setting .slide_btn button:nth-child(1){left:0}
.slide_setting .slide_btn button:nth-child(2){right:0}
.desc {margin: 0 auto; width: 880px; background-color: rgba(65, 65, 65, 0.146);}
/* //temporary css */
</style>
</head>
<body>
<!-- wrapper [s] -->
<div id="wrapper">
    <!-- header [s] -->
    <div id="header">@</div>
    <!-- header [e] -->
    <hr />
    <!-- container [s] -->
    <div id="container">
        <div class="cast_box">
            <div class="cast_tab">
                <ul>
                    <li><a href="#thema1">테마1</a></li>
                    <li><a href="#thema2">테마2</a></li>
                    <li><a href="#thema3">테마3</a></li>
                    <li><a href="#thema4">테마4</a></li>
                    <li><a href="#thema5">테마5</a></li>
                    <li class="active"><a href="#thema6">테마6</a></li>
                    <li><a href="#thema7">테마7</a></li>
                    <li><a href="#thema8">테마8</a></li>
                </ul>
            </div>
            <div class="cast_cont">
                <div id="thema1" class="cast_article active">컨텐츠1</div>
                <div id="thema2" class="cast_article">컨텐츠2</div>
                <div id="thema3" class="cast_article">컨텐츠3</div>
                <div id="thema4" class="cast_article">컨텐츠4</div>
                <div id="thema5" class="cast_article">컨텐츠5</div>
                <div id="thema6" class="cast_article">컨텐츠6</div>
                <div id="thema7" class="cast_article">컨텐츠7</div>
                <div id="thema8" class="cast_article">컨텐츠8</div>
            </div>
            <div class="cast_setting">
                <div class="cast_btn">
                    <button type="button" class="prev">이전</button><button type="button" class="next">다음</button>
                </div>
                <div class="cast_num"><span class="current">1</span> / <span class="total">8</span></div>
            </div>
        </div>
        <br>
        <p class="desc">type: 'slide' / autoplay: false / onMouseEnter: false </p>
        <div class="slide_box slide_box_1">
            <div class="slide_tab">
                <ul>
                    <li class="active"><a href="#slide1">테마1</a></li>
                    <li><a href="#slide2">테마2</a></li>
                    <li><a href="#slide3">테마3</a></li>
                    <li><a href="#slide4">테마4</a></li>
                    <li><a href="#slide5">테마5</a></li>
                    <li><a href="#slide6">테마6</a></li>
                    <li><a href="#slide7">테마7</a></li>
                    <li><a href="#slide8">테마8</a></li>
                </ul>
            </div>
            <div class="slide_cont">
                <div id="slide1" class="slide_article active">컨텐츠1</div>
                <div id="slide2" class="slide_article">컨텐츠2</div>
                <div id="slide3" class="slide_article">컨텐츠3</div>
                <div id="slide4" class="slide_article">컨텐츠4</div>
                <div id="slide5" class="slide_article">컨텐츠5</div>
                <div id="slide6" class="slide_article">컨텐츠6</div>
                <div id="slide7" class="slide_article">컨텐츠7</div>
                <div id="slide8" class="slide_article">컨텐츠8</div>
            </div>
            <div class="slide_setting">
                <div class="slide_btn">
                    <button type="button" class="prev">이전</button><button type="button" class="next">다음</button>
                </div>
            </div>
        </div>
        <br>
        <p class="desc">type: 'fadeIn' / autoplay: false / onMouseEnter: false </p>
        <div class="slide_box slide_box_2">
            <div class="slide_tab">
                <ul>
                    <li class="active"><a href="#slide1">테마1</a></li>
                    <li><a href="#slide2">테마2</a></li>
                    <li><a href="#slide3">테마3</a></li>
                    <li><a href="#slide4">테마4</a></li>
                    <li><a href="#slide5">테마5</a></li>
                    <li><a href="#slide6">테마6</a></li>
                    <li><a href="#slide7">테마7</a></li>
                    <li><a href="#slide8">테마8</a></li>
                </ul>
            </div>
            <div class="slide_cont">
                <div id="slide1" class="slide_article active">컨텐츠1</div>
                <div id="slide2" class="slide_article">컨텐츠2</div>
                <div id="slide3" class="slide_article">컨텐츠3</div>
                <div id="slide4" class="slide_article">컨텐츠4</div>
                <div id="slide5" class="slide_article">컨텐츠5</div>
                <div id="slide6" class="slide_article">컨텐츠6</div>
                <div id="slide7" class="slide_article">컨텐츠7</div>
                <div id="slide8" class="slide_article">컨텐츠8</div>
            </div>
            <div class="slide_setting">
                <div class="slide_btn">
                    <button type="button" class="prev">이전</button><button type="button" class="next">다음</button>
                </div>
            </div>
        </div>
        <br>
        <p class="desc">type: 'slide' / autoplay: true / onMouseEnter: true </p>
        <div class="slide_box slide_box_3">
            <div class="slide_tab">
                <ul>
                    <li class="active"><a href="#slide1">테마1</a></li>
                    <li><a href="#slide2">테마2</a></li>
                    <li><a href="#slide3">테마3</a></li>
                    <li><a href="#slide4">테마4</a></li>
                    <li><a href="#slide5">테마5</a></li>
                    <li><a href="#slide6">테마6</a></li>
                    <li><a href="#slide7">테마7</a></li>
                    <li><a href="#slide8">테마8</a></li>
                </ul>
            </div>
            <div class="slide_cont">
                <div id="slide1" class="slide_article active">컨텐츠1</div>
                <div id="slide2" class="slide_article">컨텐츠2</div>
                <div id="slide3" class="slide_article">컨텐츠3</div>
                <div id="slide4" class="slide_article">컨텐츠4</div>
                <div id="slide5" class="slide_article">컨텐츠5</div>
                <div id="slide6" class="slide_article">컨텐츠6</div>
                <div id="slide7" class="slide_article">컨텐츠7</div>
                <div id="slide8" class="slide_article">컨텐츠8</div>
            </div>
            <div class="slide_setting">
                <div class="slide_btn">
                    <button type="button" class="prev">이전</button><button type="button" class="next">다음</button>
                </div>
            </div>
        </div>
    </div>
    <!-- container [e] -->
    <hr />
    <!-- footer [s] -->
    <div id="footer">@</div>
    <!-- footer [e] -->
<!-- [ Javascript Area ] -->
<!-- Libs -->
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script>
(function (win, $) {
    'use strict';
    function tabComponent(container, args) {
        var defParams = {
            obj: container || '.cast_box',
            castTab: '.cast_tab',
            castTabWrap: 'ul',
            castCont: '.cast_cont',
            castArticle: '.cast_article',
            castSetting: '.cast_setting',
            castBtn: '.cast_btn',
            castNum: '.cast_num',
            activeClass: 'active'
        };
        this.opts = $.extend(defParams, args || {});
        if(!(this.obj = $(this.opts.obj)).length) return;
        this.init();
    };
    tabComponent.prototype = {
        init: function() {
            console.log('init');
            this.setElements();
            this.initOpts();
            this.initLayout();
            this.bindEvents();
            this.stateBar();
        },
        setElements: function() {
            this.castTab = this.obj.find(this.opts.castTab);
            this.castTabWrap = this.castTab.find(this.opts.castTabWrap);
            this.castTabChild = this.castTabWrap.children(); 
            this.castCont = this.obj.find(this.opts.castCont);
            this.castArticle = this.castCont.children(); 
            this.castSetting = this.obj.find(this.opts.castSetting);
            this.castBtn = this.castSetting.find(this.opts.castBtn);
            this.castNum = this.castSetting.find(this.opts.castNum);
            this.castNumChild = this.castNum.children();
            this.maxLength = this.castTabChild.length;
        },
        initOpts: function() {
            var _this = this;
            var filterCount = this.castTabChild.filter(function (idx, item) {
                if($(item).hasClass(_this.opts.activeClass)) {
                    return true;
                }
            });
            this.currentIndex = (filterCount.length) ? filterCount.index() : 0;
        },
        initLayout: function() {
            this.castArticle.removeClass(this.opts.activeClass);
            this.contViewFunc();
        },
        bindEvents: function() {
            this.castTabChild.on('click', '> a', this.onTabClickFunc.bind(this));
            this.castBtn.on('click', '> button', this.onBtnClickFunc.bind(this)); 
        },
        onTabClickFunc: function(e) {
            e.preventDefault();
            var target =  $(e.delegateTarget),
                targetIndex = target.index();
                
            this.currentIndex = targetIndex;
            this.stateBar();
            this.contViewFunc();
        },
        onBtnClickFunc: function(e) {
            var target =  $(e.currentTarget),
                prevBtn = target.index(),
                btnDirection = prevBtn ? 1 : -1;
            if ( btnDirection < 0) { //prev
                this.currentIndex--;
                this.stateBar();
                this.contViewFunc();
                if(this.currentIndex < 0) {
                    this.currentIndex = this.maxLength - 1;
                    this.stateBar();
                    this.contViewFunc(); 
                }
            } else { // next
                this.currentIndex++;
                this.stateBar();
                this.contViewFunc(); 
                if(this.currentIndex > this.maxLength - 1) {
                    this.currentIndex = 0;
                    this.stateBar();
                    this.contViewFunc(); 
                }
            }
        },
        contViewFunc: function() {
            this.castTabChild.eq(this.oldIndex).removeClass(this.opts.activeClass);
            this.castArticle.eq(this.oldIndex).removeClass(this.opts.activeClass);
            
            this.castTabChild.eq(this.currentIndex).addClass(this.opts.activeClass);
            this.castArticle.eq(this.currentIndex).addClass(this.opts.activeClass);
            
            this.oldIndex = this.currentIndex; 
        },
        stateBar: function() { 
            this.currentPageNum = this.currentIndex + 1;
            this.castNumChild.eq(0)[0].innerHTML = this.currentPageNum;
            this.castNumChild.eq(1)[0].innerHTML = this.maxLength;
        }
    };
    function slideComponent(container, args) {
        var defParams = {
            obj: container || '.slide_box',
            slideCont: '.slide_cont', // 컨텐츠 bg
            slideArticle: '.slide_article',
            slideIndiWrap: 'ul',
            slideBtn: '.slide_btn',
            prevBtn : '.prev',
            nextBtn : '.next',
            activeClass: 'active',
            initialSlide: 0,
            direction: null,
            type: null, // 'fadeIn' 'slide' 
            delay: 2000,
            autoplay: false, // true, false
            onMouseEnter: false,
        };
        this.opts = $.extend(defParams, args || {});
        if(!(this.obj = $(this.opts.obj)).length) return;
        this.init();
    };
    slideComponent.prototype = {
        init: function() {
            console.log('---------side---------');
            this.setElements();
            this.initClass();
            this.initLayout();
            this.bindEvents();
            this.viewType();
        },
        initLayout: function() {
            this.currentIndex = this.opts.initialSlide;
            this.slideArticle.hide().eq(this.currentIndex).show();
            this.slideIndicator.eq(this.currentIndex).addClass(this.opts.activeClass);
            this.oldIndex = this.currentIndex;
        },
        initClass: function() {
            console.log(this.slideIndicator);
            var _this = this;
            var rmvClass = this.slideIndicator.filter(function (idx, item) {
                console.log(idx, item); 
                if($(item).hasClass(_this.opts.activeClass)) {
                    $(item).removeClass(_this.opts.activeClass);
                }
            });
        },
        setElements: function() {
            this.slideCont = this.obj.find(this.opts.slideCont);
            this.slideArticle = this.slideCont.find(this.opts.slideArticle);
            this.slideIndiWrap = this.obj.find(this.opts.slideIndiWrap);
            this.slideIndicator = this.slideIndiWrap.children();
            this.clickBtnWrap = this.obj.find(this.opts.slideBtn);
            this.nextBtn = this.clickBtnWrap.find(this.opts.nextBtn);
            this.prevBtn = this.clickBtnWrap.find(this.opts.prevBtn);
            this.maxLength = this.slideArticle.length; 
        },
        bindEvents : function() {
            this.prevBtn.on('click', this.onPrevClickFunc.bind(this));
            this.nextBtn.on('click', this.onNextClickFunc.bind(this));
            this.slideIndicator.on('click', '> a',this.onIndicatorClickFunc.bind(this));
            if(this.opts.onMouseEnter === true) {
                this.slideCont.on('mouseenter', this.mouseEnterFunc.bind(this));
                this.slideCont.on('mouseleave', this.mouseLeaveFunc.bind(this));
                // this.slideCont.on('hover', this.mouseEnterFunc.bind(this), this.mouseLeaveFunc.bind(this));
            }
        },
        onPrevClickFunc: function() {
            this.opts.direction = 'left';
            this.currentIndex--;
            this.checkStateFunc();
            this.viewType();
            this.slideViewFunc();
        },
        onNextClickFunc: function() {
            this.opts.direction = 'right';
            this.currentIndex++;
            this.checkStateFunc();
            this.viewType();
            this.slideViewFunc();
        },
        onIndicatorClickFunc: function(e) {
            e.preventDefault();
            var target =  $(e.delegateTarget),
                targetIndex = target.index();
            this.currentIndex = targetIndex;
            this.viewType();
            this.slideViewFunc();
        },
        slideViewFunc : function() {
            this.slideArticle.eq(this.oldIndex).removeClass(this.opts.activeClass);
            this.slideArticle.eq(this.currentIndex).addClass(this.opts.activeClass);
            this.slideIndicator.eq(this.oldIndex).removeClass(this.opts.activeClass);
            this.slideIndicator.eq(this.currentIndex).addClass(this.opts.activeClass);
            this.oldIndex = this.currentIndex;
        },
        checkStateFunc: function() {
            console.log(this.currentIndex);
            if(this.currentIndex < 0) {
                console.log('0보다 작당')
                this.currentIndex = this.maxLength - 1;
            } else if (this.currentIndex > this.maxLength - 1) {
                console.log('0보다 크당')
                this.currentIndex = 0;
            }
        },
        viewType: function() {
            // 슬라이드 타입  1.slide, 2.fadeIn
            if(this.opts.type === 'slide') {
                this.animateSlide();
            } else if (this.opts.type === 'fadeIn') {
                this.animateFadeIn();
            }
            // 2) 인터벌
            if(this.opts.autoplay === true) { 
                this.mouseLeaveFunc();
            }
        },
        animateSlide: function() {
            var slideDir = 1; // default - right
            // if(this.opts.direction === 'left' || this.currentIndex < this.oldIndex) {  
                /**
                 * this.currentIndex < this.oldIndex
                 * 인디케이터 누르면 좌우로 슬라이딩되는 걸 구현하고 싶었는데, 
                 * 오토플레이에서 인디케이서 클릭으로 컨트롤하면 슬라이더가 폭주하면서 꼬임. 뭐가 문젠지 모르게따..
                 */
            if(this.opts.direction === 'left') { 
                slideDir = -1;
            }
            this.slideArticle.eq(this.currentIndex).css({
                'display': 'block',
                'left': '100' * slideDir + '%'
            });
            this.slideArticle.eq(this.oldIndex).stop().animate({
                'left': '100' * -slideDir + '%'
            }, {
                complete: function() { $(this).hide().css('left', ''); }
            });
            this.slideArticle.eq(this.currentIndex).stop().animate({
                'left': '0px'
            });
        },
        animateFadeIn: function() {
            this.slideArticle.hide().eq(this.currentIndex).fadeIn();
        },
        autoplayFunc: function () { // autoplay는 오른쪽으로만
            this.currentIndex++;
            if (this.currentIndex > this.maxLength - 1) {
                this.currentIndex = 0;
            }
            this.animateSlide();  
            this.slideViewFunc();
        },
        mouseEnterFunc: function() {
            console.log('마우스가 올라왔어요.');
            clearInterval(this.intervalId); 
        },
        mouseLeaveFunc: function() {
            console.log('마우스가  article을 떠났어요..');
            var intervalId = setInterval(this.autoplayFunc.bind(this), this.opts.delay);
            this.intervalId = intervalId;
        }
    };
    $(function () {
        var tabComponentCall = new tabComponent('.cast_box');
        var slideComponentCall = new slideComponent('.slide_box_1', {
            type: 'slide',
            autoplay: false,
            onMouseEnter: false,                             
        });
        var slideComponentCall = new slideComponent('.slide_box_2', {
            type: 'fadeIn',
            autoplay: false,         
            onMouseEnter: false,                          
        });
        var slideComponentCall = new slideComponent('.slide_box_3', {
            type: 'slide',
            autoplay: true,     
            onMouseEnter: true,                              
        });

    });
})(window, window.jQuery);
</script>
</div>
</body>
</html>
